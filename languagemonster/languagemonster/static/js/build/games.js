function shuffle(t){for(var i,e,s=t.length;s;)e=Math.floor(Math.random()*s--),i=t[s],t[s]=t[e],t[e]=i;return t}function convertTo2D(t){if(t.length%2!==0)return!1;for(var i=[],e=0;e<t.length-1;e+=2){var s=t[e],o=t[e+1],h=[s,o];i.push(h)}return i}function objectValues(t){var i=[];for(var e in t)t.hasOwnProperty(e)&&i.push(t[e]);return i}function getCookie(t){var i=null;if(document.cookie&&""!==document.cookie)for(var e=document.cookie.split(";"),s=0;s<e.length;s++){var o=jQuery.trim(e[s]);if(o.substring(0,t.length+1)==t+"="){i=decodeURIComponent(o.substring(t.length+1));break}}return i}function setData(t,i,e){var s=i.split(/\./);s.length<2?t[s[0]]=e:(t[s[0]]||(t[s[0]]={}),t=t[s.shift()],setData(t,s.join("."),e))}function getData(t,i){var e=i.split(/\./);return e.length<2?t[e[0]]:(t[e[0]]||(t[e[0]]={}),t=t[e.shift()],getData(t,e.join(".")))}function newGame(){game=new MONSTER.Game(60)}var MONSTER=MONSTER||{};MONSTER.Const=function(){},MONSTER.Const.PI=3.14159265359,MONSTER.Const.PI_2=MONSTER.Const.PI/2,MONSTER.Const.AHEAD=1,MONSTER.Const.LEFT=2,MONSTER.Const.RIGHT=3,MONSTER.isZero=function(t){return Math.abs(t)<1e-6},MONSTER.linear=function(t,i,e,s,o){return t/(e-i)*(o-s)+s},MONSTER.Utils=function(){},MONSTER.Utils.replace_at=function(t,i,e){return t.substr(0,i)+e+t.substr(i+e.length)},MONSTER.Common=function(){},MONSTER.Common.restart=function(t){},MONSTER.Common.correct=function(t){t.game.learned.push(t.current_pair.id),t.game.round_id<=t.game.actual_rounds&&t.game.points++,t.resultScreen(!0)},MONSTER.Common.negative=function(t){t.game.to_repeat.push(t.current_pair.id),t.game.to_ask.push(t.current_pair),t.resultScreen(!1)},MONSTER.Common.check_answer=function(t,i){i===t.answer?MONSTER.Common.correct(i):MONSTER.Common.negative(i)},MONSTER.Common.endScreen=function(t){var i=t;t.game.view.removeChildren(),t.game.pct=Math.round(t.game.points/t.game.all.length*100);var e=new PIXI.Text(t.game.pct+"%",t.sizes[36]);e.position.x=(t.game.width-e.width)/2,e.position.y=.35*t.game.height;var s=new PIXI.Text("",t.sizes[30]);s.text=MONSTER.Common.trans("Well done",window.translations),s.position.x=(t.game.width-s.width)/2,s.position.y=.15*t.game.height,t.info=new PIXI.Text(MONSTER.Common.trans("Sending results...",window.translations),t.sizes[16]),t.info.position.x=(t.game.width-t.info.width)/2,t.info.position.y=.89*t.game.height,t.b=MONSTER.Common.createButton(i,MONSTER.Common.trans("Continue",window.translations),0,0,200,100,(t.game.width-200)/2,.6*t.game.height,function(){i.game.level_id++,i.game.next_level(),i.game.kick_off()}),t.game.view.addChild(e),t.game.view.addChild(s),t.game.view.addChild(t.info),t.game.view.addChild(t.b),MONSTER.Common.sendResults(t)},MONSTER.Common.cancelAnimationFrame=function(t){var i=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.msCancelAnimationFrame;return i(t)},MONSTER.Common.getWordSet=function(t){var i=t.game;if(i.round_id===i.to_ask.length)return!1;var e=i.to_ask[i.round_id];i.round_id++;var s=0,o=1;t.current_pair=e,t.question=e.words[s],t.answer=e.words[o],t.choices=[],t.choices.push(t.answer),shuffle(i.all);for(var h=0;h<i.all.length&&(i.all[h].id!=t.current_pair.id&&t.choices.push(i.all[h].words[o]),4!=t.choices.length);h++);if(t.choices=shuffle(t.choices),4!=t.choices.length)throw"Not enough choices";return!0},MONSTER.Common.spriteURLs={btn_info:"/static/images/games/information.png"},MONSTER.Common.getLoader=function(){var t=PIXI.loader;return t.reset(),t.add("btn_info",MONSTER.Common.spriteURLs.btn_info),t},MONSTER.Common.showTutorial=function(t){if(t.currentScreen){var i=window.games_played,e=t.currentScreen.ID;i.indexOf(e)<0&&(i.push(e),MONSTER.Common._showTutorial(t,t.tutorial))}},MONSTER.Common._showTutorial=function(t,i){$("#"+i).modal("show"),t.pause=!0,t.currentScreen.onGamePause()},MONSTER.Common.hideCursor=function(){document.body.style.cursor="none"},MONSTER.Common.showCursor=function(){document.body.style.cursor="default"},MONSTER.Common.addUI=function(t){var i=PIXI.Sprite.fromImage(MONSTER.Common.spriteURLs.btn_info);if(i.scale.x=i.scale.y=.65,i.interactive=!0,t.currentScreen){var e=t.tutorial;i.click=function(i){MONSTER.Common._showTutorial(t,e)},i.mouseover=function(t){document.body.style.cursor="pointer"},i.mouseout=function(t){document.body.style.cursor="default"},$("#"+e).on("hide.bs.modal",function(){t.pause=!1,t.currentScreen.onGamePauseOff()}),t.view.addChild(i)}},MONSTER.Common.fillBackground=function(t,i){t.game.background.beginFill(i,1),t.game.background.drawRect(0,0,t.game.width,t.game.height),t.game.background.endFill()},MONSTER.Common.setUpAjax=function(){$.ajaxSetup({beforeSend:function(t,i){/^http:.*/.test(i.url)||/^https:.*/.test(i.url)||t.setRequestHeader("X-CSRFToken",getCookie("csrftoken"))}})},MONSTER.Common.secure_answer_size=function(t,i,e){var s=18,o=t.text.length;if(-1!=t.text.indexOf(" ")&&o>s){var h=Math.floor(o/s),n=Math.floor(.66*s),a=0;if(h>0)for(var r=0;o>r&&(" "==t.text[r]&&r-a>n&&(a=r,t.text=MONSTER.Utils.replace_at(t.text,r,"\n"),h--),0!==h);r++);}for(var p=0;p<i.length&&(t.style=i[p],!(t.width<=e));p++);},MONSTER.Common.createButton=function(t,i,e,s,o,h,n,a,r){var p=new PIXI.Graphics;p.position.x=n,p.position.y=a,p.beginFill(t.button_colors.active),p.drawRect(e,s,o,h),p.endFill(),p.interactive=!1,p.hitArea=new PIXI.Rectangle(e,s,o,h),p.text=i;var c=[t.sizes[26],t.sizes[22],t.sizes[16],t.sizes[12]],m=new PIXI.Text(i,c[0]),l=function(t){for(var i=0;i<c.length&&(m.style=c[i],m.position.x=e+(o-m.width)/2,m.position.y=s+(h-m.height)/2+2,!(m.width<=t));i++);};return l(o),p.addChild(m),p.click=function(i){p.clear(),p.beginFill(t.button_colors.click),p.drawRect(e,s,o,h,3),p.endFill(),r()},p.mouseover=function(i){p.clear(),p.beginFill(t.button_colors.hover),p.drawRect(e,s,o,h,3),p.endFill(),document.body.style.cursor="pointer"},p.mouseout=function(i){p.clear(),p.beginFill(t.button_colors.active),p.drawRect(e,s,o,h,3),p.endFill(),document.body.style.cursor="default"},p},MONSTER.Common.sendResults=function(t){$.ajax({method:"POST",crossDomain:!1,url:"/api/local/users/results",contentType:"application/json",data:JSON.stringify({dataset_id:t.game.data.dataset_id,email:t.game.data.email,mark:t.game.pct,words_learned:t.game.learned,to_repeat:t.game.to_repeat,game:t.ID}),dataType:"json"}).success(function(i){t.info.text=MONSTER.Common.trans("Results were sent",window.translations),t.info.position.x=(t.game.width-t.info.width)/2,t.b.interactive=!0}).error(function(i){t.info.text=MONSTER.Common.trans("Error when sending results",window.translations),t.info.position.x=(t.game.width-t.info.width)/2})},MONSTER.Common.trans=function(t,i){return t in i?i[t]:t},MONSTER.GoodWrongScreen=function(t,i,e,s){var o=new PIXI.Container,h=new PIXI.Graphics;h.beginFill(16777215,.8),h.drawRect(i.show,e.y,e.width,e.height),h.endFill();var n=new PIXI.Text("",s[30]),a=new PIXI.Text("",s[36]),r=new PIXI.Text("",s[30]),p=new PIXI.Text("",s[30]),c=new PIXI.Text("",s[30]);return a.position.y=(t.height-a.height)/2,n.position.y=(t.height-n.height)/4,o.addChild(h),h.addChild(a),h.addChild(n),h.addChild(r),h.addChild(p),h.addChild(c),{box:o,pos_screen:h,pos_screen_comment:n,pos_screen_text:a,pos_screen_text_line1:r,pos_screen_text_line2:p,pos_screen_text_line3:c}},MONSTER.GoodWrongScreen.prepare=function(t,i){var e=t.box;e.pos_screen_text.text=t.question+" = "+t.answer,e.pos_screen_text.width>.8*t.game.width?(e.pos_screen_text.text="",e.pos_screen_text_line1.text=t.question,e.pos_screen_text_line2.text="=",e.pos_screen_text_line3.text=t.answer,console.log(e),e.pos_screen_text_line1.position.x=(t.game.width-e.pos_screen_text_line1.width)/2,e.pos_screen_text_line2.position.x=(t.game.width-e.pos_screen_text_line2.width)/2,e.pos_screen_text_line3.position.x=(t.game.width-e.pos_screen_text_line3.width)/2,e.pos_screen_text_line1.position.y=(t.game.height-e.pos_screen_text_line1.height)/2,e.pos_screen_text_line2.position.y=e.pos_screen_text_line1.position.y+e.pos_screen_text_line2.height,e.pos_screen_text_line3.position.y=e.pos_screen_text_line2.position.y+e.pos_screen_text_line3.height):(e.pos_screen_text_line1.text="",e.pos_screen_text_line2.text="",e.pos_screen_text_line3.text="",e.pos_screen_text.position.x=(t.game.width-e.pos_screen_text.width)/2);var s=i?MONSTER.Common.trans("Good",t.trans):MONSTER.Common.trans("Wrong",t.trans);e.pos_screen.tint=i?t.colors.success:t.colors.failure,e.pos_screen_comment.text=s,e.pos_screen_comment.position.x=(t.game.width-e.pos_screen_comment.width)/2,e.box.position.x=t.result_screen_x.right,t.game.tweens.push(new MONSTER.Tween(e.box,"position.x",t.result_screen_x.show,1e3)),t.game.setStopFunc(t.next_round,2e3,t)},MONSTER.Easing=function(){},MONSTER.Easing.prototype.constructor=MONSTER.Easing,MONSTER.Easing.linear=function(t){return t},MONSTER.Easing.easeInQuad=function(t){return t*t},MONSTER.Easing.easeOutQuad=function(t){return t*(2-t)},MONSTER.Easing.easeInOutQuad=function(t){return.5>t?2*t*t:-1+(4-2*t)*t},MONSTER.Easing.easeInCubic=function(t){return t*t*t},MONSTER.Easing.easeOutCubic=function(t){return--t*t*t+1},MONSTER.Easing.easeInOutCubic=function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},MONSTER.Easing.easeInQuart=function(t){return t*t*t*t},MONSTER.Easing.easeOutQuart=function(t){return 1- --t*t*t*t},MONSTER.Easing.easeInOutQuart=function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},MONSTER.Easing.easeInQuint=function(t){return t*t*t*t*t},MONSTER.Easing.easeOutQuint=function(t){return 1+--t*t*t*t*t},MONSTER.Easing.easeInOutQuint=function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t},MONSTER.Tween=function(t,i,e,s){this.object=t,this.variable=i,this.targetValue=e,this.time=s,this.currentTime=0,this.startValue=getData(this.object,this.variable),this.active=!0},MONSTER.Tween.prototype.update=function(t){this.currentTime+=t;var i=this.currentTime/this.time,e=MONSTER.Easing.easeOutCubic(i),s=Math.round(e*(this.targetValue-this.startValue))+this.startValue;this.active&&setData(this.object,this.variable,s),this.currentTime>this.time&&(this.active=!1)},MONSTER.FuncTimer=function(t,i){this.func=t,this.time=i,this.currentTime=0,this.active=!0},MONSTER.FuncTimer.prototype.update=function(t){this.active&&(this.currentTime+=t,this.active&&this.currentTime>this.time&&(this.active=!1,this.func()))},MONSTER.Key=function(){},MONSTER.Key._pressed={},MONSTER.Key.P=80,MONSTER.Key.SPACE=32,MONSTER.Key.LEFT=37,MONSTER.Key.UP=38,MONSTER.Key.RIGHT=39,MONSTER.Key.DOWN=40,MONSTER.Key.isDown=function(t){return MONSTER.Key._pressed[t]},MONSTER.Key.isUp=function(t){return MONSTER.Key._pressed[t]?(delete MONSTER.Key._pressed[t],!0):!1},MONSTER.Key.onKeydown=function(t){MONSTER.Key._pressed[t.keyCode]=!0},MONSTER.Key.onKeyup=function(t){delete MONSTER.Key._pressed[t.keyCode]},window.addEventListener("keyup",function(t){MONSTER.Key.onKeyup(t)},!1),window.addEventListener("keydown",function(t){MONSTER.Key.onKeydown(t)},!1),MONSTER.Key.blockScrolling=function(){window.addEventListener("keydown",function(t){[MONSTER.Key.SPACE,MONSTER.Key.LEFT,MONSTER.Key.RIGHT,MONSTER.Key.DOWN,MONSTER.Key.UP].indexOf(t.keyCode)>-1&&t.preventDefault()},!1)},MONSTER.DataLoader=function(t,i,e,s,o){this.dataset_id=t,this.email=i,this.max_rounds=e,this.pack={},this.success=!1,this.success_func=s,this.sender=o},MONSTER.DataLoader.prototype.constructor=MONSTER.DataLoader,MONSTER.DataLoader.prototype.loadWordPairs=function(){var t=this;t.success=!1,t.error_code=null,$.ajax({method:"GET",crossDomain:!1,timeout:15e3,url:"/api/local/words/"+this.dataset_id+"/"+this.email,error:function(i,e,s){t.success=!1,t.error_code=e;var o=MONSTER.Common.trans("Server error, please try again",window.translations)+" ("+e+")";t.sender.top_bar_loading_text.text=o;var h=.5*t.sender.game.width-.5*t.sender.top_bar_loading_text.width;t.sender.top_bar_loading_text.position.x=h;var n=MONSTER.Common.createButton(t.sender,MONSTER.Common.trans("Try again",window.translations),0,0,200,50,300,360,function(){location.href=window.location.href});n.interactive=!0,t.sender.game.view.addChild(n)},success:function(i){t.word_sets=i,t.success=!0,t.success_func.apply(t.sender,[t.sender])}})},MONSTER.AbstractScreen=function(t){this.game=t},MONSTER.AbstractScreen.prototype.constructor=MONSTER.AbstractScreen,MONSTER.AbstractScreen.prototype.update=function(){},MONSTER.LoadingScreen=function(t){var i=this;this.game=t,this.ID="loader",MONSTER.AbstractScreen.call(this,t),MONSTER.Key.blockScrolling(),this.trans=window.translations,this.colors={background:"0x76D3DE",success:"0x33E46D",failure:"0xFF5039"},this.button_colors={question:"#ffffff",active:"0xC72618",hover:"0xAE0D00",click:"0x940000"},this.sizes={36:{fontFamily:"Montserrat",fontSize:36,fill:"white"},30:{fontFamily:"Montserrat",fontSize:30,fill:"white"},26:{fontFamily:"Montserrat",fontSize:26,fill:"white"},22:{fontFamily:"Montserrat",fontSize:22,fill:"white"},16:{fontFamily:"Montserrat",fontSize:16,fill:"white"},12:{fontFamily:"Montserrat",fontSize:12,fill:"white"}},MONSTER.Common.setUpAjax(),this.data_loader=new MONSTER.DataLoader(this.game.data.dataset_id,this.game.data.email,this.max_rounds,this.start_loading,this),this.result_screen_x={show:0,right:this.game.width,left:-this.game.width},this.result_screen_pos=new PIXI.Rectangle(0,0,this.game.width,this.game.height),this.box=new PIXI.Container,this.pos_screen=new PIXI.Graphics,this.pos_screen.beginFill(16777215,.8),this.pos_screen.drawRect(this.result_screen_x.show,this.result_screen_pos.y,this.result_screen_pos.width,this.result_screen_pos.height),this.pos_screen.endFill(),this.pos_screen_comment=new PIXI.Text("",this.sizes[30]),this.pos_screen_text=new PIXI.Text("Language Monster",this.sizes[36]),this.pos_screen_text.position.y=(this.game.height-this.pos_screen_text.height)/2,this.pos_screen_comment.position.y=(this.game.height-this.pos_screen_comment.height)/4,this.box.addChild(this.pos_screen),this.pos_screen.addChild(this.pos_screen_text),this.pos_screen.addChild(this.pos_screen_comment),this.top_bar=new PIXI.Container,this.top_bar_text=new PIXI.Text(MONSTER.Common.trans("Language Monster",this.trans),this.sizes[36]),this.top_bar_loading_text=new PIXI.Text(MONSTER.Common.trans("Loading, please wait",this.trans),this.sizes[26]),this.loading_bar_pos_x=this.result_screen_x.left,this.loading_bar=new PIXI.Graphics,this.loading_bar.beginFill(this.colors.success,.8),this.loading_bar.drawRect(this.loading_bar_pos_x,this.game.height-30,this.game.width,30),this.loading_bar.endFill(),this.top_bar_text_pos={y:.5*this.game.height-.5*this.top_bar_text.height,x:.5*this.game.width-.5*this.top_bar_text.width},this.top_bar_loading_text_pos={y:.7*this.game.height-.5*this.top_bar_loading_text.height,x:.5*this.game.width-.5*this.top_bar_loading_text.width},this.top_bar_text.position.y=this.top_bar_text_pos.y,this.top_bar_text.position.x=this.top_bar_text_pos.x,this.top_bar_loading_text.position.y=this.top_bar_loading_text_pos.y,this.top_bar_loading_text.position.x=this.top_bar_loading_text_pos.x,this.top_bar.addChild(this.top_bar_text),this.top_bar.addChild(this.top_bar_loading_text),this.top_bar.addChild(this.loading_bar),this.init();var e=window.games;this.loader=MONSTER.Common.getLoader();for(var s=0;s<e.length;s++){var o=t.assets[e[s]];for(var h in o)o.hasOwnProperty(h)&&this.loader.add(h,o[h])}this.loader.on("progress",function(){i.loading_bar_pos_x=i.loader.progress/100*i.game.width}),this.loader.on("complete",function(){i.kick_off()}),this.data_loader.loadWordPairs()},MONSTER.LoadingScreen.prototype=Object.create(MONSTER.AbstractScreen.prototype),MONSTER.LoadingScreen.prototype.constructor=MONSTER.LoadingScreen,MONSTER.LoadingScreen.prototype.update=function(){MONSTER.AbstractScreen.prototype.update.call(this),this.loading_bar.position.x=this.loading_bar_pos_x},MONSTER.LoadingScreen.prototype.start_loading=function(){this.game.word_sets=this.data_loader.word_sets,this.game.next_level(),this.loader.load()},MONSTER.LoadingScreen.prototype.init=function(){this.game.background.clear(),this.game.view.removeChildren(),MONSTER.Common.fillBackground(this,this.colors.background),this.game.view.addChild(this.top_bar)},MONSTER.LoadingScreen.prototype.kick_off=function(){this.game.kick_off()},MONSTER.SimpleGame=function(t){MONSTER.AbstractScreen.call(this,t);this.ID="simple",t.tutorial="modal-tut-simple",this.trans=window.translations,this.colors={background:"0x243757",success:"0x33E46D",failure:"0xFF5039",question:"#ffffff",active:"0xC72618",hover:"0xAE0D00",click:"0x940000"},this.button_colors={question:"#ffffff",active:"0xC72618",hover:"0xAE0D00",click:"0x940000"},this.sizes={36:{fontFamily:"Montserrat",fontSize:36,fill:"white"},30:{fontFamily:"Montserrat",fontSize:30,fill:"white"},26:{fontFamily:"Montserrat",fontSize:26,fill:"white"},22:{fontFamily:"Montserrat",fontSize:22,fill:"white"},16:{fontFamily:"Montserrat",fontSize:16,fill:"white"},12:{fontFamily:"Montserrat",fontSize:12,fill:"white"}},MONSTER.Common.setUpAjax(),this.result_screen_x={show:0,right:this.game.width,left:-this.game.width},this.result_screen_pos=new PIXI.Rectangle(0,0,this.game.width,this.game.height),this.box=MONSTER.GoodWrongScreen(this.game,this.result_screen_x,this.result_screen_pos,this.sizes),this.init()},MONSTER.SimpleGame.prototype=Object.create(MONSTER.AbstractScreen.prototype),MONSTER.SimpleGame.prototype.constructor=MONSTER.SimpleGame,MONSTER.SimpleGame.prototype.onGamePause=function(){},MONSTER.SimpleGame.prototype.onGamePauseOff=function(){},MONSTER.SimpleGame.prototype.update=function(){MONSTER.AbstractScreen.prototype.update.call(this)},MONSTER.SimpleGame.prototype.next_round=function(){var t=this;setTimeout(function(){t.init()},100),this.game.tweens.push(new MONSTER.Tween(this.box.box,"position.x",this.result_screen_x.left,1e3))},MONSTER.SimpleGame.prototype.resultScreen=function(t){MONSTER.GoodWrongScreen.prepare(this,t)},MONSTER.SimpleGame.prototype.check_answer=function(t){t===this.answer?MONSTER.Common.correct(this):MONSTER.Common.negative(this)},MONSTER.SimpleGame.prototype.init=function(){var t=this;if(this.game.background.clear(),this.game.view.removeChildren(),MONSTER.Common.fillBackground(this,this.colors.background),!MONSTER.Common.getWordSet(this))return MONSTER.Common.endScreen(this);var i=new PIXI.Text(this.question,{font:"36px Montserrat",fill:this.colors.question});i.position.x=(this.game.width-i.width)/2,i.position.y=.12*this.game.height,this.game.view.addChild(i);var e=250,s=90,o=1400,h=MONSTER.Common.createButton(this,this.choices[0],0,0,e,s,-e,150,function(){h.interactive=!1,t.check_answer(t.choices[0])});h.interactive=!0;var n=MONSTER.Common.createButton(this,this.choices[1],0,0,e,s,this.game.width+e,150,function(){n.interactive=!1,t.check_answer(t.choices[1])});n.interactive=!0;var a=MONSTER.Common.createButton(this,this.choices[2],0,0,e,s,-e,280,function(){a.interactive=!1,t.check_answer(t.choices[2])});a.interactive=!0;var r=MONSTER.Common.createButton(this,this.choices[3],0,0,e,s,this.game.width+e,280,function(){r.interactive=!1,t.check_answer(t.choices[3])});r.interactive=!0,this.game.view.addChild(h),this.game.view.addChild(n),this.game.view.addChild(a),this.game.view.addChild(r),this.game.tweens.push(new MONSTER.Tween(h,"position.x",75,o)),this.game.tweens.push(new MONSTER.Tween(n,"position.x",475,o)),this.game.tweens.push(new MONSTER.Tween(a,"position.x",75,o)),this.game.tweens.push(new MONSTER.Tween(r,"position.x",475,o)),MONSTER.Common.addUI(this.game),this.box.box.position.x=this.result_screen_x.right,this.game.view.addChild(this.box.box),setTimeout(function(){MONSTER.Common.showTutorial(this.game)},700)},MONSTER.SpaceGame=function(t){this.ID="space",t.tutorial="modal-tut-space",MONSTER.AbstractScreen.call(this,t),MONSTER.Key.blockScrolling(),this.trans=window.translations,this.colors={background:"0x7FBFFF",success:"0x33E46D",failure:"0xFF5039"},this.button_colors={question:"#ffffff",active:"0xC72618",hover:"0xAE0D00",click:"0x940000"},this.hit=!1,this.shipActive=!0,this.sizes={36:{fontFamily:"Montserrat",fontSize:36,fill:"white"},30:{fontFamily:"Montserrat",fontSize:30,fill:"white"},26:{fontFamily:"Montserrat",fontSize:26,fill:"white"},22:{fontFamily:"Montserrat",fontSize:22,fill:"white"},16:{fontFamily:"Montserrat",fontSize:16,fill:"white"},12:{fontFamily:"Montserrat",fontSize:12,fill:"white"}},this.rects=[new PIXI.Rectangle(70,125,200,100),new PIXI.Rectangle(450,125,200,100),new PIXI.Rectangle(70,300,200,100),new PIXI.Rectangle(450,300,200,100)],this.answers=[],MONSTER.Common.setUpAjax(),this.result_screen_on=!1,this.result_screen_x={show:0,right:this.game.width,left:-this.game.width},this.result_screen_pos=new PIXI.Rectangle(0,0,this.game.width,this.game.height),this.box=MONSTER.GoodWrongScreen(this.game,this.result_screen_x,this.result_screen_pos,this.sizes),this.top_bar=new PIXI.Container,this.top_bar_text=new PIXI.Text("",this.sizes[36]),this.top_bar_y={show:.18*this.game.height,hide:-this.top_bar_text.height},this.top_bar_text.position.y=this.top_bar_y.hide,this.top_bar.addChild(this.top_bar_text),this.urls=this.game.assets.space,this.ship_v=0,this.max_v=4.8,this.min_v=.8,this.drag=.0015,this.rotation_v=.0028,this.brakes=.001,this.acceleration=.003,this.assets=objectValues(this.urls),this.init()},MONSTER.SpaceGame.prototype=Object.create(MONSTER.AbstractScreen.prototype),MONSTER.SpaceGame.prototype.constructor=MONSTER.SpaceGame,MONSTER.SpaceGame.prototype.onGamePause=function(){},MONSTER.SpaceGame.prototype.onGamePauseOff=function(){},MONSTER.SpaceGame.prototype.update=function(){MONSTER.AbstractScreen.prototype.update.call(this),this.hit||(this.moveShip(),this.shipActive&&this.checkCollisions())},MONSTER.SpaceGame.prototype.init=function(){var t=78,i=6;this.game.background.clear(),this.game.view.removeChildren(),MONSTER.Common.fillBackground(this,this.colors.background);for(var e=PIXI.BaseTexture.fromImage(this.urls.plane),s=PIXI.BaseTexture.fromImage(this.urls.plane_left),o=PIXI.BaseTexture.fromImage(this.urls.plane_right),h=[],n=[],a=[],r=0;i>r;r++){var p=new PIXI.Rectangle(r*t,0,t,t);h.push(new PIXI.Texture(e,p)),n.push(new PIXI.Texture(s,p)),a.push(new PIXI.Texture(o,p))}this.ship_normal=this.createShip(h),this.ship_left=this.createShip(n),this.ship_right=this.createShip(a),this.game.view.addChild(this.ship_normal),this.game.view.addChild(this.ship_left),this.game.view.addChild(this.ship_right),this.ship=this.ship_normal,this.ship.play(),this.ship.position.x=this.game.width/1.3,this.ship_v=3,this.ship.rotation=Math.PI,this.game.view.addChild(this.top_bar),this.box.box.position.x=this.result_screen_x.right,MONSTER.Common.addUI(this.game),this.game.view.addChild(this.box.box),setTimeout(function(){MONSTER.Common.showTutorial(this.game)},700),this.next_round()},MONSTER.SpaceGame.prototype.createShip=function(t){var i=new PIXI.extras.MovieClip(t);return i.animationSpeed=.5,i.anchor.x=i.anchor.y=.5,i.position.x=-1e3,i},MONSTER.SpaceGame.prototype.moveShip=function(){var t=this.game.timeSinceLastFrame;if(MONSTER.Key&&MONSTER.Key.isDown(MONSTER.Key.LEFT)?(this.ship.rotation-=t*this.rotation_v,this.turn(MONSTER.Const.LEFT)):MONSTER.Key&&MONSTER.Key.isDown(MONSTER.Key.RIGHT)?(this.ship.rotation+=t*this.rotation_v,this.turn(MONSTER.Const.RIGHT)):this.turn(MONSTER.Const.AHEAD),MONSTER.Key&&MONSTER.Key.isDown(MONSTER.Key.UP)?this.ship_v+=t*this.acceleration+1/(this.max_v*this.max_v):MONSTER.Key&&MONSTER.Key.isDown(MONSTER.Key.DOWN)&&(this.ship_v-=t*this.brakes),this.ship){var i=this.ship.position.x,e=this.ship.position.y,s=this.ship.rotation;i*Math.cos(s)-e*Math.sin(s),i*Math.sin(s)+e*Math.cos(s);this.ship.position.x+=this.ship_v*Math.cos(s-MONSTER.Const.PI_2),this.ship.position.y+=this.ship_v*Math.sin(s-MONSTER.Const.PI_2),this.ship_v-=this.drag*t,this.ship_v<this.min_v&&(this.ship_v=this.min_v),this.ship_v>this.max_v&&(this.ship_v=this.max_v),this.ship.position.x>this.game.width?this.ship.position.x=this.game.width-this.ship.position.x:this.ship.position.x<0&&(this.ship.position.x=this.game.width-this.ship.position.x),this.ship.position.y>this.game.height?this.ship.position.y=this.game.height-this.ship.position.y:this.ship.position.y<0&&(this.ship.position.y=this.game.height-this.ship.position.y)}},MONSTER.SpaceGame.prototype.turn=function(t){var i=null,e=[];t===MONSTER.Const.LEFT?(i=this.ship_left,e.push(this.ship_normal),e.push(this.ship_right)):t===MONSTER.Const.RIGHT?(i=this.ship_right,e.push(this.ship_normal),e.push(this.ship_left)):(i=this.ship_normal,e.push(this.ship_right),e.push(this.ship_left)),i.position.x=this.ship.position.x,i.position.y=this.ship.position.y,i.rotation=this.ship.rotation,i.play();for(var s=0;2>s;s++)e[s].stop(),e[s].position.x=-1e3;this.ship=i},MONSTER.SpaceGame.prototype.checkCollisions=function(){if(this.ship&&this.ship_v>0&&!this.hit)for(var t=0;t<this.answers.length;t++){var i=this.answers[t];i.r.contains(this.ship.position.x,this.ship.position.y)&&(this.hit=!0,this.moveOutOfScreen(),i.word==this.answer?MONSTER.Common.correct(this):(this.shipActive=!1,this.ship_normal.alpha=this.ship_left.alpha=this.ship_right.alpha=.5,MONSTER.Common.negative(this)))}},MONSTER.SpaceGame.prototype.moveOutOfScreen=function(){this.game.tweens.push(new MONSTER.Tween(this.top_bar,"position.y",this.top_bar_y.hide,1e3));for(var t=0;t<this.answers.length;t++){var i=this.answers[t];i.text.position.x<this.game.width/2?this.game.tweens.push(new MONSTER.Tween(i.text,"position.x",-i.text.width/2,1e3)):this.game.tweens.push(new MONSTER.Tween(i.text,"position.x",this.game.width+i.text.width/2,1e3))}},MONSTER.SpaceGame.prototype.resultScreen=function(t){MONSTER.GoodWrongScreen.prepare(this,t)},MONSTER.SpaceGame.prototype.next_round=function(){this.answers.length=0;var t=this;return MONSTER.Common.getWordSet(this)?(this.top_bar_text.text=this.question,this.top_bar_text.position.x=(this.game.width-this.top_bar_text.width)/2,this.hit&&(this.game.tweens.push(new MONSTER.Tween(this.box.box,"position.x",this.result_screen_x.left,1e3)),setTimeout(function(){t.activateShipAgain()},1500)),this.game.tweens.push(new MONSTER.Tween(this.top_bar,"position.y",this.top_bar_y.show,1e3)),this.createAnswer(this.choices[0],0),this.createAnswer(this.choices[1],1),this.createAnswer(this.choices[2],2),this.createAnswer(this.choices[3],3),void(this.hit=!1)):MONSTER.Common.endScreen(this)},MONSTER.SpaceGame.prototype.activateShipAgain=function(){this.shipActive=!0,this.ship_normal.alpha=this.ship_left.alpha=this.ship_right.alpha=1},MONSTER.SpaceGame.prototype.createAnswer=function(t,i){var e=this,s=this.rects[i],o=(new PIXI.Graphics,Math.floor(Math.random()*s.width+s.x)),h=Math.floor(Math.random()*s.height+s.y),n=[this.sizes[22],this.sizes[16],this.sizes[12]],a=0,r=new PIXI.Text(t,n[a]);MONSTER.Common.secure_answer_size(r,n,150);var p=function(){o<e.game.width/2?r.position.x=-r.width:r.position.x=e.game.width+r.width,r.position.y=h,r.anchor.x=r.anchor.y=.5,e.game.view.addChild(r);var i=new PIXI.Rectangle(o-r.width/2,r.position.y-r.height/2,r.width,r.height),s={r:i,word:t,text:r};e.answers.push(s),e.game.tweens.push(new MONSTER.Tween(r,"position.x",o,1e3))};p()},MONSTER.PlaneGame=function(t){this.ID="plane",t.tutorial="modal-tut-plane",MONSTER.AbstractScreen.call(this,t),MONSTER.Key.blockScrolling(),this.trans=window.translations,this.colors={background:"0x76D3DE",success:"0x33E46D",failure:"0xFF5039"},this.button_colors={question:"#ffffff",active:"0xC72618",hover:"0xAE0D00",click:"0x940000"},this.hit=!1,this.shipActive=!0,this.constant_answer_speed=!1,this.sizes={36:{fontFamily:"Montserrat",fontSize:36,fill:"white"},30:{fontFamily:"Montserrat",fontSize:30,fill:"white"},26:{fontFamily:"Montserrat",fontSize:26,fill:"white"},22:{fontFamily:"Montserrat",fontSize:22,fill:"white"},16:{fontFamily:"Montserrat",fontSize:16,fill:"white"},12:{fontFamily:"Montserrat",fontSize:12,fill:"white"}},this.rects=[new PIXI.Rectangle(70,125,200,100),new PIXI.Rectangle(450,125,200,100),new PIXI.Rectangle(70,300,200,100),new PIXI.Rectangle(450,300,200,100)],this.answers=[],MONSTER.Common.setUpAjax(),this.result_screen_on=!1,this.result_screen_x={show:0,right:this.game.width,left:-this.game.width},this.result_screen_pos=new PIXI.Rectangle(0,0,this.game.width,this.game.height),this.box=MONSTER.GoodWrongScreen(this.game,this.result_screen_x,this.result_screen_pos,this.sizes),this.top_bar=new PIXI.Container,this.top_bar_text=new PIXI.Text("",this.sizes[36]),this.top_bar_y={show:.18*this.game.height,hide:-this.top_bar_text.height},this.top_bar_text.position.y=this.top_bar_y.hide,this.top_bar.addChild(this.top_bar_text),this.urls=this.game.assets.plane,this.ship_v=0,this.max_v=6,this.drag=.0015,this.rotation_v=.0028,this.brakes=.001,this.acceleration=.003,this.assets=objectValues(this.urls),this.init()},MONSTER.PlaneGame.prototype=Object.create(MONSTER.AbstractScreen.prototype),MONSTER.PlaneGame.prototype.constructor=MONSTER.PlaneGame,MONSTER.PlaneGame.prototype.onGamePause=function(){},MONSTER.PlaneGame.prototype.onGamePauseOff=function(){},MONSTER.PlaneGame.prototype.update=function(){if(MONSTER.AbstractScreen.prototype.update.call(this),!this.hit){if(this.moveShip(),this.answers&&this.game.actual_rounds)for(var t=this.game.timeSinceLastFrame,i=0;i<this.answers.length;i++)this.constant_answer_speed?this.answers[i].text.position.x-=.14*t:this.answers[i].text.position.x-=MONSTER.linear(this.game.round_id,0,this.game.actual_rounds-1,.08,.1)*t;this.shipActive&&this.checkCollisions()}},MONSTER.PlaneGame.prototype.init=function(){this.game.background.clear(),this.game.view.removeChildren(),MONSTER.Common.fillBackground(this,this.colors.background);for(var t=[],i=PIXI.BaseTexture.fromImage(this.urls.plane),e=5,s=100,o=60,h=0;e>h;h++){var n=new PIXI.Rectangle(h*s,0,s,o);t.push(new PIXI.Texture(i,n))}this.ship=new PIXI.extras.MovieClip(t),this.ship.animationSpeed=.5,this.ship.play(),this.game.view.addChild(this.ship),this.ship.anchor.x=.5,this.ship.anchor.y=.5;var a=.25*this.game.height,r=.83*this.game.height;this.ship.position.x=.2*this.game.width,this.ship.position.y=a,this.ship.start_y=a,this.ship.stop_y=r,this.ship.v_time=0,this.ship.v_up=!1,this.ship.v_up_tmp=0,this.game.view.addChild(this.top_bar),this.box.box.position.x=this.result_screen_x.right,MONSTER.Common.addUI(this.game),this.game.view.addChild(this.box.box),setTimeout(function(){MONSTER.Common.showTutorial(this.game)},700),this.next_round()},MONSTER.PlaneGame.prototype.moveShip=function(){var t=this.game.timeSinceLastFrame;if(MONSTER.Key&&MONSTER.Key.isUp(MONSTER.Key.UP)&&this.ship.position.y>1.5*this.ship.height&&(this.ship.v_up||(this.ship.v_up=!0)),this.ship){if(this.ship.v_up){this.ship.start_y=this.ship.position.y,this.ship.v_time=0;var i=.2*t;return this.ship.v_up_tmp+=i,this.ship.position.y-=i,void(this.ship.v_up_tmp>=40&&(this.ship.v_up_tmp=0,this.ship.v_up=!1))}var e=2e3;this.ship.v_time+=t;var s=MONSTER.Easing.easeInOutQuart(this.ship.v_time/e);this.ship.position.y=Math.round(s*(this.ship.stop_y-this.ship.start_y))+this.ship.start_y,this.ship.v_time>e&&(this.ship.position.y=this.ship.stop_y),this.ship.position.x>this.game.width-this.ship.width/2&&(this.ship.position.x=this.game.width-this.ship.width/2),this.ship.position.x<this.ship.width/2&&(this.ship.position.x=this.ship.width/2)}},MONSTER.PlaneGame.prototype.checkCollisions=function(){if(this.ship&&!this.hit){for(var t=0,i=0;i<this.answers.length;i++){var e=this.answers[i];Math.abs(e.text.position.x-this.ship.position.x)<this.ship.width/2&&Math.abs(e.text.position.y-this.ship.position.y)<this.ship.height/2?(this.hit=!0,this.shipActive=!1,this.ship.alpha=.5,this.moveOutOfScreen(),e.word==this.answer?MONSTER.Common.correct(this):MONSTER.Common.negative(this)):e.text.position.x<e.text.width/2&&t++}t==this.answers.length&&(this.constant_answer_speed=!0,this.hit=!0,this.shipActive=!1,this.ship.alpha=.5,
this.moveOutOfScreen(),MONSTER.Common.negative(this))}},MONSTER.PlaneGame.prototype.moveOutOfScreen=function(){this.game.tweens.push(new MONSTER.Tween(this.top_bar,"position.y",this.top_bar_y.hide,1e3));for(var t=0;t<this.answers.length;t++){var i=this.answers[t];i.text.position.x<this.game.width/2?this.game.tweens.push(new MONSTER.Tween(i.text,"position.x",-i.text.width/2,1e3)):this.game.tweens.push(new MONSTER.Tween(i.text,"position.x",this.game.width+i.text.width/2,1e3))}},MONSTER.PlaneGame.prototype.resultScreen=function(t){MONSTER.GoodWrongScreen.prepare(this,t)},MONSTER.PlaneGame.prototype.next_round=function(){return this.answers.length=0,MONSTER.Common.getWordSet(this)?(this.top_bar_text.text=this.question,this.top_bar_text.position.x=(this.game.width-this.top_bar_text.width)/2,this.hit&&(this.game.tweens.push(new MONSTER.Tween(this.box.box,"position.x",this.result_screen_x.left,1e3)),this.activateShipAgain()),this.game.tweens.push(new MONSTER.Tween(this.top_bar,"position.y",this.top_bar_y.show,1e3)),this.createAnswer(this.choices[0],0),this.createAnswer(this.choices[1],1),this.createAnswer(this.choices[2],2),this.createAnswer(this.choices[3],3),void(this.hit=!1)):MONSTER.Common.endScreen(this)},MONSTER.PlaneGame.prototype.activateShipAgain=function(){this.shipActive=!0,this.ship.alpha=1},MONSTER.PlaneGame.prototype.createAnswer=function(t,i){var e=this,s=this.rects[i],o=(new PIXI.Graphics,[this.sizes[22],this.sizes[16],this.sizes[12]]),h=0,n=new PIXI.Text(t,o[h]);MONSTER.Common.secure_answer_size(n,o,150);var a=function(){n.position.x=.7*Math.floor(Math.random()*s.width+s.x)+.7*this.game.width,n.position.y=Math.floor(Math.random()*s.height+s.y),n.anchor.x=n.anchor.y=.5,e.game.view.addChild(n);var i={word:t,text:n};e.answers.push(i)};a()},MONSTER.RunnerGame=function(t){this.ID="runner",t.tutorial="modal-tut-runner",MONSTER.AbstractScreen.call(this,t),MONSTER.Key.blockScrolling(),this.trans=window.translations,this.colors={background:"0x76D3DE",success:"0x33E46D",failure:"0xFF5039"},this.button_colors={question:"#ffffff",active:"0xC72618",hover:"0xAE0D00",click:"0x940000"},this.hit=!1,this.shipActive=!0,this.constant_answer_speed=!1,this.sizes={36:{fontFamily:"Montserrat",fontSize:36,fill:"white"},30:{fontFamily:"Montserrat",fontSize:30,fill:"white"},26:{fontFamily:"Montserrat",fontSize:26,fill:"white"},22:{fontFamily:"Montserrat",fontSize:22,fill:"white"},16:{fontFamily:"Montserrat",fontSize:16,fill:"white"},12:{fontFamily:"Montserrat",fontSize:12,fill:"white"}},this.rects=[new PIXI.Rectangle(0,240,100,100),new PIXI.Rectangle(500,240,100,100),new PIXI.Rectangle(1e3,240,100,100),new PIXI.Rectangle(1500,240,100,100)],this.answers=[],MONSTER.Common.setUpAjax(),this.result_screen_on=!1,this.result_screen_x={show:0,right:this.game.width,left:-this.game.width},this.result_screen_pos=new PIXI.Rectangle(0,0,this.game.width,this.game.height),this.box=MONSTER.GoodWrongScreen(this.game,this.result_screen_x,this.result_screen_pos,this.sizes),this.top_bar=new PIXI.Container,this.top_bar_text=new PIXI.Text("",this.sizes[36]),this.top_bar_y={show:.18*this.game.height,hide:-this.top_bar_text.height},this.top_bar_text.position.y=this.top_bar_y.hide,this.top_bar.addChild(this.top_bar_text),this.urls=this.game.assets.runner,this.ship_v=0,this.max_v=6,this.drag=.0015,this.rotation_v=.0028,this.brakes=.001,this.acceleration=.003,this.assets=objectValues(this.urls),this.init()},MONSTER.RunnerGame.prototype=Object.create(MONSTER.AbstractScreen.prototype),MONSTER.RunnerGame.prototype.constructor=MONSTER.RunnerGame,MONSTER.RunnerGame.prototype._parallax=function(t){for(var i=0;i<this.parallax.length;i++)for(var e=this.parallax[i],s=this.parallax_speed[i],o=0;o<e.length;o++){var h=e[o];if(h.position.x-=s*t,h.position.x<=-800){var n=e.shift();n.position.x=800,e.push(n)}}},MONSTER.RunnerGame.prototype.update=function(){MONSTER.AbstractScreen.prototype.update.call(this);var t=this.game.timeSinceLastFrame;if(!this.hit){if(this._parallax(t),this.moveShip(),this.answers&&this.game.actual_rounds)for(var i=0;i<this.answers.length;i++)this.answers[i].text.position.x-=MONSTER.linear(this.game.round_id,0,this.game.actual_rounds-1,.2,.23)*t;this.shipActive&&this.checkCollisions()}},MONSTER.RunnerGame.prototype.onGamePause=function(){this.ship.gotoAndStop(1)},MONSTER.RunnerGame.prototype.onGamePauseOff=function(){this.ship.play()},MONSTER.RunnerGame.prototype.init=function(){this.game.background.clear(),this.game.view.removeChildren();var t=PIXI.Texture.fromImage(this.urls.far_background),i=PIXI.Texture.fromImage(this.urls.background),e=PIXI.Texture.fromImage(this.urls.trees),s=PIXI.Texture.fromImage(this.urls.foreground),o=PIXI.Texture.fromImage(this.urls.ground);far_backgrounds=[new PIXI.Sprite(t),new PIXI.Sprite(t)],backgrounds=[new PIXI.Sprite(i),new PIXI.Sprite(i)],e=[new PIXI.Sprite(e),new PIXI.Sprite(e)],foregrounds=[new PIXI.Sprite(s),new PIXI.Sprite(s)],o=[new PIXI.Sprite(o),new PIXI.Sprite(o)],this.parallax=[far_backgrounds,backgrounds,e,o,foregrounds],this.parallax_speed=[.01,.03,.05,.07,.1],far_backgrounds[0].position.x=0,far_backgrounds[1].position.x=800,backgrounds[0].position.x=0,backgrounds[1].position.x=800,e[0].position.x=0,e[1].position.x=800,o[0].position.x=0,o[0].position.y=386,o[1].position.x=800,o[1].position.y=386,foregrounds[0].position.x=0,foregrounds[0].position.y=255,foregrounds[1].position.x=800,foregrounds[1].position.y=255,this.game.background.addChild(far_backgrounds[0]),this.game.background.addChild(far_backgrounds[1]),this.game.background.addChild(backgrounds[0]),this.game.background.addChild(backgrounds[1]),this.game.background.addChild(e[0]),this.game.background.addChild(e[1]),this.textures=[],this.textures_jump=[];for(var h=88,n=150,a=158,r=8,p=PIXI.BaseTexture.fromImage(this.urls.run),c=PIXI.BaseTexture.fromImage(this.urls.jump),m=0;r>m;m++){var l=new PIXI.Rectangle(m*h,0,h,n),d=new PIXI.Rectangle(m*h,0,h,a);this.textures.push(new PIXI.Texture(p,l)),this.textures_jump.push(new PIXI.Texture(c,d))}this.ship=new PIXI.extras.MovieClip(this.textures),this.ship.animationSpeed=.2,this.ship.play(),this.ship.anchor.x=.5,this.ship.anchor.y=.5;var u=.56*this.game.height,g=.71*this.game.height;this.original_y=.71*this.game.height,this.slide_y=.82*this.game.height,this.slide_t=0,this.ship.position.x=.2*this.game.width,this.ship.position.y=g,this.ship.start_y=g,this.ship.stop_y=u,this.ship.v_time=0,this.ship.v_up=!1,this.ship.v_down=!1,this.game.view.addChild(this.top_bar),this.box.box.position.x=this.result_screen_x.right,this.game.view.addChild(o[0]),this.game.view.addChild(o[1]),this.game.view.addChild(this.ship),this.game.view.addChild(foregrounds[0]),this.game.view.addChild(foregrounds[1]),MONSTER.Common.addUI(this.game),this.game.view.addChild(this.box.box),setTimeout(function(){MONSTER.Common.showTutorial(this.game)},700),this.next_round()},MONSTER.RunnerGame.prototype.moveShip=function(){var t=this.game.timeSinceLastFrame;if(MONSTER.Key&&MONSTER.Key.isUp(MONSTER.Key.UP)&&(this.ship.v_up||this.ship.v_down||(this.ship.textures=this.textures_jump,this.ship.v_up=!0,this.ship.start_y=this.ship.position.y,this.ship.stop_y=this.ship.start_y-200)),MONSTER.Key&&MONSTER.Key.isUp(MONSTER.Key.DOWN)&&(this.ship.v_down||this.ship.v_up||(this.ship.rotation=1.5*MONSTER.Const.PI,this.ship.gotoAndStop(1),this.ship.v_down=!0,this.ship.position.y=this.slide_y)),this.ship){if(this.ship.v_down)this.slide_t+=t,this.slide_t>1200&&(this.slide_t=0,this.ship.v_down=!1,this.ship.rotation=0,this.ship.play(),this.ship.position.y=this.original_y);else if(this.ship.v_up){var i=700;this.ship.v_time+=t;var e=MONSTER.Easing.easeOutQuart(this.ship.v_time/i);this.ship.position.y=Math.round(e*(this.ship.stop_y-this.ship.start_y))+this.ship.start_y,this.ship.v_time>i&&(this.ship.v_time=0,this.ship.v_up=!1,this.ship.position.y=this.ship.stop_y)}!this.ship.v_up&&this.ship.position.y<this.original_y&&(this.ship.position.y+=.3*t),this.ship.position.y>this.original_y&&(this.jump_count=0,this.ship.textures=this.textures),this.ship.position.x>this.game.width-this.ship.width/2&&(this.ship.position.x=this.game.width-this.ship.width/2),this.ship.position.x<this.ship.width/2&&(this.ship.position.x=this.ship.width/2)}},MONSTER.RunnerGame.prototype.checkCollisions=function(){if(this.ship&&!this.hit){for(var t=0,i=0;i<this.answers.length;i++){var e=this.answers[i],s=!1;this.ship.v_down?e.text.position.x>=this.ship.position.x-this.ship.width/2&&e.text.position.x<=this.ship.position.x+this.ship.width/2&&e.text.position.y>=this.ship.position.y-this.ship.height/2.5&&e.text.position.y<=this.ship.position.y+this.ship.height/2.5&&(s=!0):e.text.position.x>=this.ship.position.x-this.ship.width/2&&e.text.position.x<=this.ship.position.x+this.ship.width/2&&e.text.position.y>=this.ship.position.y-this.ship.height/2&&e.text.position.y<=this.ship.position.y+this.ship.height/2&&(s=!0),s?(this.hit=!0,this.moveOutOfScreen(),e.word==this.answer?MONSTER.Common.correct(this):MONSTER.Common.negative(this)):e.text.position.x<e.text.width/2&&t++}t==this.answers.length&&(this.constant_answer_speed=!0,this.hit=!0,this.moveOutOfScreen(),MONSTER.Common.negative(this))}},MONSTER.RunnerGame.prototype.moveOutOfScreen=function(){this.game.tweens.push(new MONSTER.Tween(this.top_bar,"position.y",this.top_bar_y.hide,1e3));for(var t=0;t<this.answers.length;t++){var i=this.answers[t];i.text.position.x<this.game.width/2?this.game.tweens.push(new MONSTER.Tween(i.text,"position.x",-i.text.width/2,1e3)):this.game.tweens.push(new MONSTER.Tween(i.text,"position.x",this.game.width+i.text.width/2,1e3))}},MONSTER.RunnerGame.prototype.resultScreen=function(t){this.ship.stop(),result_screen_on=!0,MONSTER.GoodWrongScreen.prepare(this,t)},MONSTER.RunnerGame.prototype.next_round=function(){return this.answers.length=0,MONSTER.Common.getWordSet(this)?(this.ship.play(),this.top_bar_text.text=this.question,this.top_bar_text.position.x=(this.game.width-this.top_bar_text.width)/2,this.hit&&(this.game.tweens.push(new MONSTER.Tween(this.box.box,"position.x",this.result_screen_x.left,1e3)),this.game.setStopFunc(this.activateShipAgain,1500,this)),this.game.tweens.push(new MONSTER.Tween(this.top_bar,"position.y",this.top_bar_y.show,1e3)),this.createAnswer(this.choices[0],0),this.createAnswer(this.choices[1],1),this.createAnswer(this.choices[2],2),this.createAnswer(this.choices[3],3),void(this.hit=!1)):MONSTER.Common.endScreen(this)},MONSTER.RunnerGame.prototype.activateShipAgain=function(){this.shipActive=!0},MONSTER.RunnerGame.prototype.createAnswer=function(t,i){var e=this,s=this.rects[i],o=(new PIXI.Graphics,[this.sizes[22],this.sizes[16],this.sizes[12]]),h=0,n=new PIXI.Text(t,o[h]);n.style=o[h];var a=150;MONSTER.Common.secure_answer_size(n,o,a);var r=function(){n.position.x=1*Math.floor(Math.random()*s.width+s.x)+1*this.game.width,n.position.y=Math.floor(Math.random()*s.height+s.y),n.anchor.x=n.anchor.y=.5,e.game.view.addChild(n);var i={word:t,text:n};e.answers.push(i)};r()},MONSTER.ShooterGame=function(t){this.ID="shooter",t.tutorial="modal-tut-shooter",MONSTER.AbstractScreen.call(this,t),MONSTER.Key.blockScrolling(),this.trans=window.translations,this.colors={background:"0x76D3DE",success:"0x33E46D",failure:"0xFF5039"},this.button_colors={question:"#ffffff",active:"0xC72618",hover:"0xAE0D00",click:"0x940000"},this.hit=!1,this.shipActive=!0,this.constant_answer_speed=!1,this.sizes={36:{fontFamily:"Montserrat",fontSize:36,fill:"white"},30:{fontFamily:"Montserrat",fontSize:30,fill:"white"},26:{fontFamily:"Montserrat",fontSize:26,fill:"white"},22:{fontFamily:"Montserrat",fontSize:22,fill:"white"},16:{fontFamily:"Montserrat",fontSize:16,fill:"white"},12:{fontFamily:"Montserrat",fontSize:12,fill:"white"}},this.rects=[new PIXI.Rectangle(0,130,100,90),new PIXI.Rectangle(300,130,100,90),new PIXI.Rectangle(600,130,100,90),new PIXI.Rectangle(900,130,100,90)],this.answers=[],MONSTER.Common.setUpAjax(),this.result_screen_on=!1,this.result_screen_x={show:0,right:this.game.width,left:-this.game.width},this.result_screen_pos=new PIXI.Rectangle(0,0,this.game.width,this.game.height),this.box=MONSTER.GoodWrongScreen(this.game,this.result_screen_x,this.result_screen_pos,this.sizes),this.top_bar=new PIXI.Container,this.top_bar_text=new PIXI.Text("",this.sizes[36]),this.top_bar_y={show:.18*this.game.height,hide:-this.top_bar_text.height},this.top_bar_text.position.y=this.top_bar_y.hide,this.top_bar.addChild(this.top_bar_text),this.urls=this.game.assets.shooter,this.ship_v=0,this.max_v=6,this.drag=.0015,this.rotation_v=.0028,this.brakes=.001,this.acceleration=.003,this.assets=objectValues(this.urls),this.init()},MONSTER.ShooterGame.prototype=Object.create(MONSTER.AbstractScreen.prototype),MONSTER.ShooterGame.prototype.constructor=MONSTER.ShooterGame,MONSTER.ShooterGame.prototype.update=function(){if(MONSTER.AbstractScreen.prototype.update.call(this),!this.hit&&(this.moveShip(),this.answers&&this.game.actual_rounds)){for(var t=0,i=this.game.timeSinceLastFrame,e=0;e<this.answers.length;e++)this.constant_answer_speed?this.answers[e].text.position.x-=.16*i:this.answers[e].text.position.x-=MONSTER.linear(this.game.round_id,0,this.game.actual_rounds-1,.16,.19)*i,this.answers[e].text.position.x<this.answers[e].text.width/2&&t++;t==this.answers.length&&(this.constant_answer_speed=!0,this.hit=!0,this.moveOutOfScreen(),MONSTER.Common.negative(this))}},MONSTER.ShooterGame.prototype.onGamePause=function(){},MONSTER.ShooterGame.prototype.onGamePauseOff=function(){MONSTER.Common.hideCursor()},MONSTER.ShooterGame.prototype.mousemove=function(t){this.crosshair.position.x=t.data.global.x,this.crosshair.position.y=t.data.global.y,this.ship.position.x=MONSTER.linear(this.crosshair.position.x,0,this.game.width,.4*this.game.width,.6*this.game.width)},MONSTER.ShooterGame.prototype.init=function(){var t=this;this.game.background.clear(),this.game.view.removeChildren(),MONSTER.Common.hideCursor(),MONSTER.Common.fillBackground(this,this.colors.background),this.crosshair_t=PIXI.Texture.fromImage(this.urls.crosshair),this.crosshair_red_t=PIXI.Texture.fromImage(this.urls.crosshair_red),this.crosshair=new PIXI.Sprite(this.crosshair_t),this.crosshair.anchor.x=this.crosshair.anchor.y=.5,this.crosshair.position.x=.5*this.game.width,this.crosshair.position.y=.5*this.game.height,this.ship=PIXI.Sprite.fromImage(this.urls.rifle),this.game.view.interactive=!0,this.game.view.on("mousemove",this.mousemove.bind(this)),this.game.view.on("mouseup",function(){t.crosshair.texture=t.crosshair_t}),this.game.view.on("mousedown",function(){t.crosshair.texture=t.crosshair_red_t}),this.game.view.on("click",this.checkHit.bind(this)),this.ship.anchor.x=.5,this.ship.anchor.y=.5,this.ship.scale.x=this.ship.scale.y=.5;var i=.56*this.game.height,e=.71*this.game.height;this.original_y=.71*this.game.height,this.slide_y=.78*this.game.height,this.slide_t=0,this.ship.position.x=.5*this.game.width,this.ship.position.y=.9*this.game.height,this.ship.start_y=e,this.ship.stop_y=i,this.ship.v_time=0,this.ship.v_up=!1,this.ship.v_down=!1,this.game.view.addChild(this.top_bar),this.box.box.position.x=this.result_screen_x.right;for(var s=PIXI.Texture.fromImage(this.urls.grass1),o=PIXI.Texture.fromImage(this.urls.grass2),h=0,n=0;h<this.game.width;h+=132,n++){var a;n%2===0?(a=new PIXI.Sprite(s),a.position.y=this.game.height-170):(a=new PIXI.Sprite(o),a.position.y=this.game.height-186),a.position.x=h,this.game.view.addChild(a)}this.game.view.addChild(this.ship),this.game.view.addChild(this.crosshair),MONSTER.Common.addUI(this.game),this.game.view.addChild(this.box.box),setTimeout(function(){MONSTER.Common.showTutorial(this.game)},700),this.next_round()},MONSTER.ShooterGame.prototype.moveShip=function(){var t=this.game.timeSinceLastFrame;if(MONSTER.Key&&MONSTER.Key.isUp(MONSTER.Key.UP)&&(this.ship.v_up||this.ship.v_down||(this.ship.textures=this.textures_jump,this.ship.v_up=!0,this.ship.start_y=this.ship.position.y,this.ship.stop_y=this.ship.start_y-200)),MONSTER.Key&&MONSTER.Key.isUp(MONSTER.Key.DOWN)&&(this.ship.v_down||this.ship.v_up||(this.ship.rotation=1.5*MONSTER.Const.PI,this.ship.gotoAndStop(1),this.ship.v_down=!0,this.ship.position.y=this.slide_y)),this.ship){if(this.ship.v_down)this.slide_t+=t,this.slide_t>1200&&(this.slide_t=0,this.ship.v_down=!1,this.ship.rotation=0,this.ship.play(),this.ship.position.y=this.original_y);else if(this.ship.v_up){var i=700;this.ship.v_time+=t;var e=MONSTER.Easing.easeOutQuart(this.ship.v_time/i);this.ship.position.y=Math.round(e*(this.ship.stop_y-this.ship.start_y))+this.ship.start_y,this.ship.v_time>i&&(this.ship.v_time=0,this.ship.v_up=!1,this.ship.position.y=this.ship.stop_y)}!this.ship.v_up&&this.ship.position.y<this.original_y&&(this.ship.position.y+=.3*t),this.ship.position.y>this.original_y&&(this.jump_count=0,this.ship.textures=this.textures),this.ship.position.x>this.game.width-this.ship.width/2&&(this.ship.position.x=this.game.width-this.ship.width/2),this.ship.position.x<this.ship.width/2&&(this.ship.position.x=this.ship.width/2)}},MONSTER.ShooterGame.prototype.checkHit=function(){if(this.ship&&!this.hit)for(var t=0;t<this.answers.length;t++){var i=this.answers[t],e=!1;i.text.position.x>=this.crosshair.position.x-this.crosshair.width&&i.text.position.x<=this.crosshair.position.x+this.crosshair.width&&i.text.position.y>=this.crosshair.position.y-this.crosshair.height&&i.text.position.y<=this.crosshair.position.y+this.crosshair.height&&(e=!0),e&&(this.hit=!0,this.moveOutOfScreen(),i.word==this.answer?MONSTER.Common.correct(this):MONSTER.Common.negative(this))}},MONSTER.ShooterGame.prototype.moveOutOfScreen=function(){this.game.tweens.push(new MONSTER.Tween(this.top_bar,"position.y",this.top_bar_y.hide,1e3));for(var t=0;t<this.answers.length;t++){var i=this.answers[t];i.text.position.x<this.game.width/2?this.game.tweens.push(new MONSTER.Tween(i.text,"position.x",-i.text.width/2,1e3)):this.game.tweens.push(new MONSTER.Tween(i.text,"position.x",this.game.width+i.text.width/2,1e3))}},MONSTER.ShooterGame.prototype.resultScreen=function(t){result_screen_on=!0,MONSTER.GoodWrongScreen.prepare(this,t)},MONSTER.ShooterGame.prototype.next_round=function(){return this.answers.length=0,MONSTER.Common.getWordSet(this)?(this.top_bar_text.text=this.question,this.top_bar_text.position.x=(this.game.width-this.top_bar_text.width)/2,this.hit&&(this.game.tweens.push(new MONSTER.Tween(this.box.box,"position.x",this.result_screen_x.left,1e3)),setTimeout(this.activateShipAgain.bind(this),1500)),this.game.tweens.push(new MONSTER.Tween(this.top_bar,"position.y",this.top_bar_y.show,1e3)),this.createAnswer(this.choices[0],0),this.createAnswer(this.choices[1],1),this.createAnswer(this.choices[2],2),this.createAnswer(this.choices[3],3),void(this.hit=!1)):(MONSTER.Common.showCursor(),MONSTER.Common.endScreen(this))},MONSTER.ShooterGame.prototype.activateShipAgain=function(){this.shipActive=!0},MONSTER.ShooterGame.prototype.createAnswer=function(t,i){var e=this,s=this.rects[i],o=(new PIXI.Graphics,[this.sizes[22],this.sizes[16],this.sizes[12]]),h=0,n=new PIXI.Text(t,o[h]),a=150;MONSTER.Common.secure_answer_size(n,o,a);var r=function(){n.position.x=1*Math.floor(Math.random()*s.width+s.x)+1.3*this.game.width,n.position.y=Math.floor(Math.random()*s.height+s.y),n.anchor.x=n.anchor.y=.5,e.game.view.addChild(n);var i={word:t,text:n};e.answers.push(i)};r()},MONSTER.Game=function(t){this.requestId=void 0,this.res=[[800,450],[640,360]],this.games=window.games,this.current_game="",this.pause=!1,this.game_tmp={},this.level_id=0,this.max_rounds=20;for(var i=0;i<this.games.length;i++){this.games[i];this.game_tmp[game]=null}this.data=window.data,this.initStage(),this.tweens=[],this.assets={simple:{},runner:{run:"/static/images/games/runner/panda_run.png",jump:"/static/images/games/runner/panda_jump.png",far_background:"/static/images/games/runner/far_background.png",background:"/static/images/games/runner/background.png",trees:"/static/images/games/runner/trees.png",foreground:"/static/images/games/runner/foreground.png",ground:"/static/images/games/runner/ground.png"},shooter:{grass1:"/static/images/games/shooter/grass1.png",grass2:"/static/images/games/shooter/grass2.png",rifle:"/static/images/games/shooter/rifle.png",crosshair:"/static/images/games/shooter/crosshair_white_small.png",crosshair_red:"/static/images/games/shooter/crosshair_red_small.png"},plane:{plane:"/static/images/games/plane/crazy_plane.png"},space:{plane:"/static/images/games/space/plane.png",plane_left:"/static/images/games/space/plane_left.png",plane_right:"/static/images/games/space/plane_right.png"}},this.loaded=!1,this.g=$("#game"),this.g.focus(),this.parent=this.g.parent(),this.resolutionOK=!1,window.canvas_only?this.renderer=new PIXI.CanvasRenderer(0,0):this.renderer=new PIXI.autoDetectRenderer(0,0),this.resize(),this.lastTime=Date.now(),this.timeSinceLastFrame=0,this.requestedFrameRate=1e3/t,window.addEventListener("orientationchange",this.resize.bind(this),!1),window.addEventListener("resize",this.resize.bind(this),!1),this.isWebGL=this.renderer instanceof PIXI.WebGLRenderer,document.getElementById("game").appendChild(this.renderer.view),this.initRandomGame()},MONSTER.Game.prototype.constructor=MONSTER.Game,MONSTER.Game.prototype.setStopFunc=function(t,i,e){this.stopTimer=0,this.stopFunc=t,this.stopTime=i,this.stopBind=e},MONSTER.Game.prototype.resetStopFunc=function(){this.stopTimer=0,this.stopFunc=null,this.stopTime=0,this.stopBind=null},MONSTER.Game.prototype.kick_off=function(){this.stop();var t=Math.floor(Math.random()*this.games.length),i=this.games[t];this.current_game=i,"simple"==i?this.currentScreen=new MONSTER.SimpleGame(this):"space"==i?this.currentScreen=new MONSTER.SpaceGame(this):"plane"==i?this.currentScreen=new MONSTER.PlaneGame(this):"runner"==i?this.currentScreen=new MONSTER.RunnerGame(this):"shooter"==i&&(this.currentScreen=new MONSTER.ShooterGame(this)),this.start()},MONSTER.Game.prototype.initRandomGame=function(){this.stop(),this.current_game=game,this.currentScreen=new MONSTER.LoadingScreen(this),this.start()},MONSTER.Game.prototype.initStage=function(){this.stage=new PIXI.Container,this.background=new PIXI.Graphics,this.top=new PIXI.Graphics,this.view=new PIXI.Container,this.stage.addChild(this.background),this.stage.addChild(this.view),this.stage.addChild(this.top)},MONSTER.Game.prototype.next_level=function(){var t=this.word_sets.data,i=t.length;this.level_id+1==i&&(this.level_id=0),this.to_ask=t[this.level_id].to_ask.slice(),this.all=this.to_ask.slice(),this.rounds=this.to_ask.length,this.actual_rounds=Math.min(this.rounds,this.max_rounds),this.points=0,this.round_id=0,this.to_repeat=[],this.learned=[]},MONSTER.Game.prototype.resize=function(){this.resolutionOK=!1;var t=this.parent.width();this.parent.height();this.width=0,this.height=0;for(var i=0;i<this.res.length;i++){var e=this.res[i][0],s=this.res[i][1];if(t>e){this.width=e,this.height=s,this.resolutionOK=!0;break}}this.scaleX=this.width/800,this.scaleY=this.height/450,this.view.scale.x=this.scaleX,this.view.scale.y=this.scaleY,this.background.scale.x=this.scaleX,this.background.scale.y=this.scaleY,this.resolutionOK?($("#alert-browser-size").hide(),this.renderer.resize(this.width,this.height)):($("#alert-browser-size").show(),this.renderer.resize(0,0))},MONSTER.Game.prototype.frameRate=function(){var t=Date.now();this.timeSinceLastFrame=t-this.lastTime,this.lastTime=t},MONSTER.Game.prototype.update=function(){if(this.currentScreen&&!this.pause){this.currentScreen.update();for(var t=0;t<this.tweens.length;t++)this.tweens[t].update(this.timeSinceLastFrame);this.stopFunc&&(this.stopTimer+=this.timeSinceLastFrame,this.stopTimer>this.stopTime&&(this.stopFunc.call(this.stopBind),this.resetStopFunc()))}},MONSTER.Game.prototype.start=function(){void 0===this.requestId&&this.draw()},MONSTER.Game.prototype.stop=function(){void 0!==this.requestId&&(MONSTER.Common.cancelAnimationFrame(this.requestId),this.requestId=void 0)},MONSTER.Game.prototype.draw=function(){this&&this.renderer&&(this.update(),Date.now()-this.lastTime>=this.requestedFrameRate&&(this.frameRate(),this.renderer.render(this.stage))),this.requestId=requestAnimationFrame(this.draw.bind(this))};var game=null;window.onload=function(){window.play&&newGame()};