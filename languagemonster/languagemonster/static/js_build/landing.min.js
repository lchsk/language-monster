new Vue({delimiters:["[[","]]"],el:"#monster-home",data:{view:"main",base_lang:null,target_lang:null,target_lang_name:null,lang_pair:null,datasets:null,vis_datasets:null,selected_flag:null,datasets_offset:0,datasets_pp:4,datasets_cp:0,datasets_btns:[!1,!1],datasets_pages:0,langs_to_learn:null},created:function(){this.load_menu_data()},methods:{load_game:function(){this.show_play_now=!1,this.view="languages"},select_language:function(t){this.target_lang_name=t.target_language.original_name,this.target_lang=t.target_language.acronym,this.lang_pair=this.base_lang+"_"+this.target_lang,this.selected_flag=t.target_language.flag_filename.replace("24","30"),this.view="datasets",this.filter_datasets()},filter_datasets:function(){for(var t=[],a=0;a<this.datasets.length;a++)this.lang_pair===this.datasets[a].lang_pair&&t.push(this.datasets[a]);this.datasets_cp=Math.floor(this.datasets_offset/this.datasets_pp)+1,this.datasets_pages=Math.floor(t.length/this.datasets_pp)+1,this.datasets_btns=[this.datasets_cp>1,this.datasets_cp<this.datasets_pages],this.vis_datasets=t.slice(this.datasets_offset,this.datasets_offset+this.datasets_pp)},prev_sets_page:function(){this.datasets_offset-=this.datasets_pp,this.filter_datasets()},next_sets_page:function(){this.datasets_offset+=this.datasets_pp,this.filter_datasets()},load_script:function(t){var a=this,s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.addEventListener("load",function(){a.init_game()},!1);var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(s,e)},"goto":function(t){this.view=t},init_game:function(){window.PIXI&&window.MONSTER&&MONSTER.newGame()},play:function(t){this.view="game",this.load_script("/static/lib/pixi.js");var a="/static/js_build/games.min.js";window.debug&&(a="/static/js_build/games.js"),this.load_script(a),window.play=!0,window.games_played=window.games,window.canvas_only=!1,window.debug=window.debug,window.data={dataset_id:t},window.translations=window.translations},load_menu_data:function(){var t=this;$.ajax({method:"GET",timeout:15e3,url:"/api/local/to-study/"+window.language,success:function(a){if("success"===a.status){t.datasets=a.data.datasets;for(var s=a.data.langs_to_learn,e=0;e<s.length;e++)s[e].target_language.flag_filename+="_24px";s.length>0&&(t.base_lang=s[0].base_language.acronym),t.langs_to_learn=s}},error:function(t,a){}})}}});