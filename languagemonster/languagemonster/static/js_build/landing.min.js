window.MONSTER=window.MONSTER||{},window.MONSTER.is_mobile=function(){return/Mobi/.test(navigator.userAgent)},window.MONSTER.is_screen_size_fine=function(){return window.innerWidth>860},window.MONSTER.has_class=function(t,e){return t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},window.MONSTER.remove_class=function(t,e){if(t&&window.MONSTER.has_class(t,e)){var s=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(s," ")}},window.MONSTER=window.MONSTER||{},window.MONSTER.home_menu=new Vue({delimiters:["[[","]]"],el:"#monster-home",data:{view:"main",base_lang:null,target_lang:null,target_lang_name:null,lang_pair:null,datasets:null,vis_datasets:null,selected_flag:null,datasets_offset:0,datasets_pp:4,datasets_cp:0,datasets_btns:[!1,!1],datasets_pages:0,loaded_scripts:{},langs_to_learn:null,is_mobile:!1,screen_size_fine:!1,err:null},created:function(){this.load_menu_data(),window.addEventListener("orientationchange",this.on_resize,!1),window.addEventListener("resize",this.on_resize,!1),window.MONSTER.remove_class(document.getElementById("languages"),"hidden"),window.MONSTER.remove_class(document.getElementById("datasets"),"hidden"),window.MONSTER.remove_class(document.getElementById("game-screen"),"hidden"),window.MONSTER.remove_class(document.getElementById("alerts"),"hidden"),this.on_resize()},methods:{on_resize:function(){this.is_mobile=MONSTER.is_mobile(),this.screen_size_fine=MONSTER.is_screen_size_fine(),this.err=this.is_mobile?"mobile":this.screen_size_fine?null:"size"},load_game:function(){this.show_play_now=!1,this.view="languages"},select_language:function(t){this.target_lang_name=t.target_language.original_name,this.target_lang=t.target_language.acronym,this.lang_pair=this.base_lang+"_"+this.target_lang,this.selected_flag=t.target_language.flag_filename.replace("24","30"),this.view="datasets",this.filter_datasets()},filter_datasets:function(){for(var t=[],e=0;e<this.datasets.length;e++)this.lang_pair===this.datasets[e].lang_pair&&t.push(this.datasets[e]);this.datasets_cp=Math.floor(this.datasets_offset/this.datasets_pp)+1,this.datasets_pages=Math.ceil(t.length/this.datasets_pp),this.datasets_btns=[this.datasets_cp>1,this.datasets_cp<this.datasets_pages],this.vis_datasets=t.slice(this.datasets_offset,this.datasets_offset+this.datasets_pp)},prev_sets_page:function(){this.datasets_offset-=this.datasets_pp,this.filter_datasets()},next_sets_page:function(){this.datasets_offset+=this.datasets_pp,this.filter_datasets()},load_script:function(t){var e=this;if(this.loaded_scripts[t])return void this.init_game(t);this.loaded_scripts[t]=!1;var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.addEventListener("load",function(){e.init_game(t)},!1);var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)},"goto":function(t){this.view=t},init_game:function(t){this.loaded_scripts[t]=!0;for(var e in this.loaded_scripts)if(this.loaded_scripts.hasOwnProperty(e)&&!this.loaded_scripts[e])return;MONSTER.newGame()},play:function(t){this.view="game",this.load_script("/static/lib/pixi.js");var e="/static/js_build/games.min.js";window.debug&&(e="/static/js_build/games.js"),this.load_script(e),window.play=!0,window.games_played=window.games,window.canvas_only=!1,window.debug=window.debug,window.data={dataset_id:t},window.translations=window.translations},load_menu_data:function(){var t=this;$.ajax({method:"GET",timeout:15e3,url:"/api/local/to-study/"+window.language,success:function(e){if("success"===e.status){t.datasets=e.data.datasets;for(var s=e.data.langs_to_learn,a=0;a<s.length;a++)s[a].target_language.flag_filename+="_24px";s.length>0&&(t.base_lang=s[0].base_language.acronym),t.langs_to_learn=s}},error:function(t,e){}})}}});